/* =========================
   Navbar Styles
   ========================= */

/* Hide caret for custom dropdown links - global rule */
.navbar .navbar__item.dropdown:has(.navbar__link.my-custom-dropdown) .menu__caret,
.navbar .navbar__item.dropdown:has(.navbar__link.my-custom-dropdown) button.menu__caret,
.navbar .navbar__item.dropdown:has(.navbar__link.my-custom-dropdown) .clean-btn.menu__caret,
.navbar .navbar__item.dropdown:has(.navbar__link.my-custom-dropdown) .menu__caret svg,
.navbar .navbar__item.dropdown:has(.navbar__link.my-custom-dropdown) button[class*="caret"],
.navbar .navbar__item.dropdown:has(.navbar__link.my-custom-dropdown) button[aria-label*="dropdown"],
.navbar .navbar__item.dropdown:has(.navbar__link.my-custom-dropdown) button[aria-label*="Collapse"] {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

/* Base navbar link styles - all text black, no decorations */
.navbar .navbar__link {
  color: var(--ifm-color-black);
  text-decoration: none;
  font-weight: 500;
  
    &:hover {
      color: var(--ifm-color-primary);
    }
  }

.navbar__item {
  padding: 0.75rem 0.5rem;
}

/* Active navbar link - theme color */
.navbar .navbar__link--active,
.navbar__item .navbar__link--active {
  color: var(--ifm-color-primary);
  text-decoration: underline;
  text-decoration-thickness: 1px;
  text-underline-offset: 14px;
  text-decoration-color: var(--ifm-color-primary);
  text-decoration-style: solid;
  text-decoration-skip-ink: none;
  text-decoration-skip: none;
  text-decoration-skip-ink: none;
}

/* Hover effects with rounded corners for navbar items */
.navbar .navbar__item {
  border-radius: 0.375rem;
  
  &:hover {
    background-color: rgba(0, 0, 0, 0.05);
  }
  
  /* Standardized padding for consistent widths */
  .navbar__link {
    padding: 0.5rem 0.75rem;
    border-radius: 0.375rem;
  }
}

/* Dropdown items - black text, no decorations */
/* Target elements with both navbar__item and dropdown classes */
.navbar .navbar__item.dropdown {
  /* Base styles for dropdown link */
  > .navbar__link {
    color: var(--ifm-color-black);
    text-decoration: none;
    position: relative;
    padding-right: 2rem;
    &:hover {
      color: var(--ifm-color-primary);
      text-decoration: none;
    }
    
  }
  /* Hide the default chevron icon for custom dropdown links */
  &:has(.navbar__link.my-custom-dropdown) {
    .menu__caret,
    button.menu__caret,
    .clean-btn.menu__caret,
    button[class*="caret"],
    button[aria-label*="dropdown"],
    button[aria-label*="Collapse"],
    .navbar__link.my-custom-dropdown ~ .menu__caret,
    .navbar__link.my-custom-dropdown + .menu__caret,
    .navbar__link.my-custom-dropdown .menu__caret,
    .navbar__link.my-custom-dropdown::after {
      display: none !important;
      visibility: hidden !important;
      opacity: 0 !important;
      width: 0 !important;
      height: 0 !important;
      padding: 0 !important;
      margin: 0 !important;
    }
  }
  
  /* Rotate custom chevron on hover and when dropdown is open */
  &:has(.navbar__link.my-custom-dropdown) {
    .navbar__link.my-custom-dropdown .custom-chevron {
      transition: transform 0.2s ease;
    }
    
    &:hover .navbar__link.my-custom-dropdown .custom-chevron,
    &.dropdown--show .navbar__link.my-custom-dropdown .custom-chevron,
    .navbar__link.my-custom-dropdown[aria-expanded="true"] .custom-chevron {
      transform: translateY(0%) rotate(180deg);
    }
  }
  /* Active dropdown - theme color when any sub-page is active */
  /* JavaScript adds 'navbar__dropdown--has-active' class when dropdown menu has active item */
  &.navbar__dropdown--has-active > .navbar__link {
    color: var(--ifm-color-primary);
    text-decoration: underline;
    text-decoration-thickness: 1px;
    text-underline-offset: 14px;
    text-decoration-color: var(--ifm-color-primary);
    text-decoration-style: solid;
    text-decoration-skip-ink: none;
    text-decoration-skip: none;
    text-decoration-skip-ink: none;

  }
  
  /* Hover effect for dropdown */
  &:hover {
    background-color: rgba(0, 0, 0, 0.05);
  }
  
  /* Extend hover area downward to bridge gap to dropdown menu */
  position: relative;
  
  &::before {
    content: '';
    position: absolute;
    bottom: -8px;
    left: 0;
    right: 0;
    height: 8px;
    background: transparent;
    pointer-events: auto;
    z-index: 1000;
  }
}

/* Dropdown menu - add breathing room between trigger and popover */
.navbar .dropdown__menu {
  margin-top: 8px;
}

/* Dropdown menu items - black text with hover effects */
.navbar .dropdown__link {
  color: var(--ifm-color-black);
  text-decoration: none;
  border-radius: 0.375rem;
  padding: 0.375rem 0.75rem;
  display: block;
  
  &:hover,
  &:focus {
    color: var(--ifm-color-black);
    text-decoration: none;
    background-color: rgba(0, 0, 0, 0.05);
  }
  
  /* Active dropdown menu items - theme color */
  &.dropdown__link--active {
    color: var(--ifm-color-primary);
    text-decoration: none;

  }
}
/* Custom HTML links (GitHub, Blog) */
.navbar .navbar-icon-link {
  color: var(--ifm-color-black);
  text-decoration: none;
  
  &:hover,
  &:focus {
    color: var(--ifm-color-black);
    text-decoration: none;
  }
}

/* DocSearch button - smaller text */
.navbar .DocSearch-Button {
  font-size: 0.875rem; /* 14px */
  min-width: 16rem; /* Increased width */
  border: 0.5px solid var(--ifm-color-gray-300, #e5e7eb);
  
  .DocSearch-Button-Placeholder {
    font-size: 0.875rem;
  }
}

/* Right-hand navbar items - only for smaller widths */
@media (max-width: 996px) {
  .navbar .navbar-icon-link {
    padding: 0.25rem 0rem;
    
    &:hover,
    &:focus {
      color: var(--ifm-color-primary);
    }
  }
}

/* Dark mode adjustments */
[data-theme='dark'] .navbar {
  .navbar__link {
    color: var(--ifm-color-white);
    
    &:hover,
    &:focus {
      color: var(--ifm-color-white);
    }
  }
  
  /* Active navbar link - theme color in dark mode */
  .navbar__item--has-active-link .navbar__link,
  .navbar__item .navbar__link--active,
  .navbar__link--active {
    color: var(--ifm-color-primary);
  }
  
  /* Hover effects for navbar items in dark mode */
  .navbar__item {
    &:hover {
      background-color: rgba(255, 255, 255, 0.1);
    }
  }
  
  .navbar__item.dropdown {
    /* Base styles for dropdown link in dark mode */
    > .navbar__link {
      color: var(--ifm-color-white);
      
      &:hover,
      &:focus {
        color: var(--ifm-color-white);
      }
      
    }
    
    /* Active dropdown in dark mode - theme color */
    &.navbar__dropdown--has-active > .navbar__link {
      color: var(--ifm-color-primary);
    }
    
    &:hover {
      background-color: rgba(255, 255, 255, 0.1);
    }
    
    /* Extend hover area downward to bridge gap to dropdown menu */
    position: relative;
    
    &::before {
      content: '';
      position: absolute;
      bottom: -8px;
      left: 0;
      right: 0;
      height: 8px;
      background: transparent;
      pointer-events: auto;
      z-index: 1000;
    }
  }
  
  /* Dropdown menu in dark mode - maintain breathing room */
  .dropdown__menu {
    margin-top: 8px;
  }
  
  .dropdown__link {
    color: var(--ifm-color-white);
    
    &:hover,
    &:focus {
      color: var(--ifm-color-white);
      background-color: rgba(255, 255, 255, 0.1);
    }
    
    /* Active dropdown menu items - theme color */
    &.dropdown__link--active {
      color: var(--ifm-color-primary);
    }
  }
  
  .navbar-icon-link {
    color: var(--ifm-color-white);
    
    &:hover,
    &:focus {
      color: var(--ifm-color-white);
    }
  }
  
  /* DocSearch button in dark mode */
  .DocSearch-Button {
    border: 0.5px solid rgba(255, 255, 255, 0.2);
  }
  
  /* Right-hand navbar items in dark mode - only for smaller widths */
  @media (max-width: 996px) {
    .navbar-icon-link {
      &:hover,
      &:focus {
        background-color: rgba(255, 255, 255, 0.1);
      }
    }
    
    /* Search button styling in dark mode */
    .navbar__item .DocSearch-Button {
      &:hover {
        background-color: rgba(255, 255, 255, 0.1);
      }
    }
  }
}

/* =========================
   Mobile Sidebar Panel Styles
   ========================= */
.navbar-sidebar {
  /* Fix spacing for navbar items in mobile sidebar */
  .navbar-sidebar__item {
    margin: 0;
    padding: 0;
  }
  
  /* Fix spacing for dropdown items in mobile sidebar */
  .navbar-sidebar__item.dropdown {
    .dropdown__menu {
      padding: 0.5rem 0;
      margin: 0;
    }
    
    .dropdown__link {
      padding: 0.625rem 1.5rem 0.625rem 1.75rem;
      margin: 0.125rem 0;
      border-radius: 0.375rem;
    }
  }
  
  /* Right-hand items in mobile sidebar - match left-hand styling */
  .navbar-sidebar__item {
    /* Apply same styling to search button */
    .DocSearch-Button {
      padding: 0.75rem 1rem;
      margin: 0.25rem 0;
      border-radius: 0.375rem;
      width: 100%;
      justify-content: flex-start;
      font-size: 0.875rem; /* 14px */
      
      .DocSearch-Button-Placeholder {
        font-size: 0.875rem;
      }
    }
    
    /* Apply same styling to HTML links (GitHub, Blog) to match left-side items */
    .navbar-icon-link {
      display: block;
      padding: 0.2rem 0rem;
      margin: 0.25rem 0;
      border-radius: 0.375rem;
      color: var(--ifm-color-black);
      text-decoration: none;
      font-weight: 500;
      font-size: 0.875rem;
      transition: background-color 0.2s ease;
      
      &:hover,
      &:focus {
        color: var(--ifm-color-primary);
        background-color: rgba(0, 0, 0, 0.05);
        font-weight: 600;
      }
    }
  }
  
  /* Dark mode for mobile sidebar HTML links */
  [data-theme='dark'] & {
    .navbar-sidebar__item {
      .navbar-icon-link {
        color: var(--ifm-color-white);
        
        &:hover,
        &:focus {
          color: var(--ifm-color-primary);
          background-color: rgba(255, 255, 255, 0.1);
        }
      }
    }
  }
  
  /* Ensure consistent spacing between all items */
  .navbar-sidebar__items {
    padding: 1rem 0.5rem;
    
    > .navbar-sidebar__item {
      margin-bottom: 0.25rem;
    }
  }
}
