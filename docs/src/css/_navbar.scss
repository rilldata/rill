/* =========================
   Navbar Styles
   ========================= */

/* Base navbar link styles - all text black, no decorations */
.navbar .navbar__link {
  color: var(--ifm-color-black);
  text-decoration: none;
  font-weight: 600;
  
  &:hover {
    color: var(--ifm-color-primary);
    text-decoration: none;
  }
}

.navbar__item {
  padding: 0.75rem 0.5rem;
}

/* Active navbar link - theme color */
.navbar .navbar__link--active,
.navbar__item .navbar__link--active {
  color: var(--ifm-color-primary);
  text-decoration: underline;
  text-decoration-thickness: 1px;
  text-underline-offset: 14px;
  text-decoration-color: var(--ifm-color-primary);
  text-decoration-style: solid;
  text-decoration-skip-ink: none;
  text-decoration-skip: none;
  text-decoration-skip-ink: none;
}

/* Hover effects with rounded corners for navbar items */
.navbar .navbar__item {
  border-radius: 0.375rem;
  
  &:hover {
    background-color: rgba(0, 0, 0, 0.05);
  }
  
  /* Standardized padding for consistent widths */
  .navbar__link {
    padding: 0.5rem 0.75rem;
    border-radius: 0.375rem;

  }
}

/* Dropdown items - black text, no decorations */
/* Target elements with both navbar__item and dropdown classes */
.navbar .navbar__item.dropdown {
  /* Base styles for dropdown link */
  > .navbar__link {
    color: var(--ifm-color-black);
    text-decoration: none;
    padding-right: 1.5rem; /* Extra space for chevron */
    position: relative;
    
    &:hover {
      color: var(--ifm-color-primary);
      text-decoration: none;
    }
    
    /* Hide any default Docusaurus icons/elements */
    > svg,
    > .navbar__link-icon,
    > i {
      display: none;
    }
    
    /* Replace default Docusaurus caret with Rill-style chevron */
    &::after {
      content: '';
      position: absolute;
      right: 0.5rem;
      top: 50%;
      transform: translateY(-50%);
      width: 0;
      height: 0;
      border-left: 4px solid transparent;
      border-right: 4px solid transparent;
      border-top: 5px solid currentColor;
      transition: transform 0.2s ease;
      pointer-events: none;
      opacity: 0.7;
    }
  }
  
  /* Rotate chevron when dropdown is open or hovered */
  &--show > .navbar__link::after,
  &:hover > .navbar__link::after,
  > .navbar__link[aria-expanded="true"]::after {
    transform: translateY(-50%) rotate(180deg);
  }
  
  /* Active dropdown - theme color when any sub-page is active */
  /* JavaScript adds 'navbar__dropdown--has-active' class when dropdown menu has active item */
  &.navbar__dropdown--has-active > .navbar__link {
    color: var(--ifm-color-primary);
    color: var(--ifm-color-primary);
    text-decoration: underline;
    text-decoration-thickness: 1px;
    text-underline-offset: 14px;
    text-decoration-color: var(--ifm-color-primary);
    text-decoration-style: solid;
    text-decoration-skip-ink: none;
    text-decoration-skip: none;
    text-decoration-skip-ink: none;
  }
  
  /* Hover effect for dropdown */
  &:hover {
    background-color: rgba(0, 0, 0, 0.05);
  }
}

/* Dropdown menu - add breathing room between trigger and popover */
.navbar .dropdown__menu {
  margin-top: 2px;
}

/* Dropdown menu items - black text with hover effects */
.navbar .dropdown__link {
  color: var(--ifm-color-black);
  text-decoration: none;
  border-radius: 0.375rem;
  padding: 0.375rem 0.75rem 0.375rem 1rem;
  display: block;
  
  &:hover,
  &:focus {
    color: var(--ifm-color-black);
    text-decoration: none;
    background-color: rgba(0, 0, 0, 0.05);
  }
  
  /* Active dropdown menu items - theme color */
  &.dropdown__link--active {
    color: var(--ifm-color-primary);
    text-decoration: none;

  }
}
/* Custom HTML links (GitHub, Blog) */
.navbar .navbar-icon-link {
  color: var(--ifm-color-black);
  text-decoration: none;
  
  &:hover,
  &:focus {
    color: var(--ifm-color-black);
    text-decoration: none;
  }
}

/* DocSearch button - smaller text */
.navbar .DocSearch-Button {
  font-size: 0.875rem; /* 14px */
  min-width: 16rem; /* Increased width */
  border: 0.5px solid var(--ifm-color-gray-300, #e5e7eb);
  
  .DocSearch-Button-Placeholder {
    font-size: 0.875rem;
  }
}

/* Right-hand navbar items - only for smaller widths */
@media (max-width: 996px) {
  .navbar .navbar-icon-link {
    padding: 0.25rem 0rem;
    
    &:hover,
    &:focus {
      color: var(--ifm-color-primary);
    }
  }
}

/* Dark mode adjustments */
[data-theme='dark'] .navbar {
  .navbar__link {
    color: var(--ifm-color-white);
    
    &:hover,
    &:focus {
      color: var(--ifm-color-white);
    }
  }
  
  /* Active navbar link - theme color in dark mode */
  .navbar__item--has-active-link .navbar__link,
  .navbar__item .navbar__link--active,
  .navbar__link--active {
    color: var(--ifm-color-primary);
  }
  
  /* Hover effects for navbar items in dark mode */
  .navbar__item {
    &:hover {
      background-color: rgba(255, 255, 255, 0.1);
    }
  }
  
  .navbar__item.dropdown {
    /* Base styles for dropdown link in dark mode */
    > .navbar__link {
      color: var(--ifm-color-white);
      
      &:hover,
      &:focus {
        color: var(--ifm-color-white);
      }
      
      /* Rill-style chevron in dark mode */
      &::after {
        border-top-color: currentColor;
      }
    }
    
    /* Rotate chevron when dropdown is open in dark mode */
    &--show > .navbar__link::after,
    &:hover > .navbar__link::after,
    > .navbar__link[aria-expanded="true"]::after {
      transform: translateY(-50%) rotate(180deg);
    }
    
    /* Active dropdown in dark mode - theme color */
    &.navbar__dropdown--has-active > .navbar__link {
      color: var(--ifm-color-primary);
    }
    
    &:hover {
      background-color: rgba(255, 255, 255, 0.1);
    }
  }
  
  /* Dropdown menu in dark mode - maintain breathing room */
  .dropdown__menu {
    margin-top: 4px;
  }
  
  .dropdown__link {
    color: var(--ifm-color-white);
    
    &:hover,
    &:focus {
      color: var(--ifm-color-white);
      background-color: rgba(255, 255, 255, 0.1);
    }
    
    /* Active dropdown menu items - theme color */
    &.dropdown__link--active {
      color: var(--ifm-color-primary);
    }
  }
  
  .navbar-icon-link {
    color: var(--ifm-color-white);
    
    &:hover,
    &:focus {
      color: var(--ifm-color-white);
    }
  }
  
  /* DocSearch button in dark mode */
  .DocSearch-Button {
    border: 0.5px solid rgba(255, 255, 255, 0.2);
  }
  
  /* Right-hand navbar items in dark mode - only for smaller widths */
  @media (max-width: 996px) {
    .navbar-icon-link {
      &:hover,
      &:focus {
        background-color: rgba(255, 255, 255, 0.1);
      }
    }
    
    /* Search button styling in dark mode */
    .navbar__item .DocSearch-Button {
      &:hover {
        background-color: rgba(255, 255, 255, 0.1);
      }
    }
  }
}

/* =========================
   Mobile Sidebar Panel Styles
   ========================= */
.navbar-sidebar {
  /* Fix spacing for navbar items in mobile sidebar */
  .navbar-sidebar__item {
    margin: 0;
    padding: 0;
  }
  
  /* Fix spacing for dropdown items in mobile sidebar */
  .navbar-sidebar__item.dropdown {
    .dropdown__menu {
      padding: 0.5rem 0;
      margin: 0;
    }
    
    .dropdown__link {
      padding: 0.625rem 1.5rem 0.625rem 1.75rem;
      margin: 0.125rem 0;
      border-radius: 0.375rem;
    }
  }
  
  /* Right-hand items in mobile sidebar - match left-hand styling */
  .navbar-sidebar__item {
    /* Apply same styling to search button */
    .DocSearch-Button {
      padding: 0.75rem 1rem;
      margin: 0.25rem 0;
      border-radius: 0.375rem;
      width: 100%;
      justify-content: flex-start;
      font-size: 0.875rem; /* 14px */
      
      .DocSearch-Button-Placeholder {
        font-size: 0.875rem;
      }
    }
  }
  
  /* Ensure consistent spacing between all items */
  .navbar-sidebar__items {
    padding: 1rem 0.5rem;
    
    > .navbar-sidebar__item {
      margin-bottom: 0.25rem;
    }
  }
}
