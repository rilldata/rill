$schema: 'http://json-schema.org/draft-07/schema#'
$id: sources.schema.yaml
title: Source YAML
type: object
description: |
  :::warning Deprecated Feature
  **Sources have been deprecated** and are now considered "source models." While sources remain backward compatible, we recommend migrating to the new source model format for access to the latest features and improvements.

  **Next steps:**
  - Continue using sources if needed (backward compatible)
  - Migrate to source models via the `type:model` parameter for existing projects
  - See our [model YAML reference](advanced-models) for current documentation and best practices
  :::

  Source YAML files define data sources that can be imported into Rill projects.
allOf:
  - title: Properties
    type: object
    properties:
      type:
        type: string
        const: model
        description: Refers to the resource type and must be `model`
      connector:
        type: string
        description: Refers to the connector type for the source, see [connectors](/connect) for more information
        enum:
          - https
          - s3
          - gcs
          - local_file
          - motherduck
          - athena
          - redshift
          - postgres
          - sqlite
          - snowflake
          - bigquery
          - duckdb
      uri:
        type: string
        description: |
          Refers to the URI of the remote connector you are using for the source. Rill also supports glob patterns as part of the URI for S3 and GCS (required for type: http, s3, gcs).

          - `s3://your-org/bucket/file.parquet` — the s3 URI of your file
          - `gs://your-org/bucket/file.parquet` — the gsutil URI of your file
          - `https://data.example.org/path/to/file.parquet` — the web address of your file
      path:
        type: string
        description: Refers to the local path of the connector you are using for the source
      sql:
        type: string
        description: Sets the SQL query to extract data from a SQL source
      region:
        type: string
        description: Sets the cloud region of the S3 bucket or Athena
      endpoint:
        type: string
        description: Overrides the S3 endpoint to connect to
      output_location:
        type: string
        description: Sets the query output location and result files in Athena
      workgroup:
        type: string
        description: Sets a workgroup for Athena connector
      project_id:
        type: string
        description: Sets a project id to be used to run BigQuery jobs
      timeout:
        type: string
        description: The maximum time to wait for source ingestion
      refresh:
        type: object
        description: |
          Specifies the refresh schedule that Rill should follow to re-ingest and update the underlying source data (optional).
          - **cron** - a cron schedule expression, which should be encapsulated in single quotes, e.g. `* * * * *` (optional)
          - **every** - a Go duration string, such as `24h` (optional)
        properties:
          cron:
            type: string
            description: A cron schedule expression, which should be encapsulated in single quotes, e.g. `* * * * *`
          every:
            type: string
            description: A Go duration string, such as `24h`
      db:
        type: string
        description: Sets the database for motherduck connections and/or the path to the DuckDB/SQLite db file
      database_url:
        type: string
        description: Postgres connection string that should be used
      duckdb:
        type: object
        description: Specifies the raw parameters to inject into the DuckDB read_csv, read_json or read_parquet statement
        additionalProperties: true
      dsn:
        type: string
        description: Used to set the Snowflake connection string
    required:
      - type
      - connector 