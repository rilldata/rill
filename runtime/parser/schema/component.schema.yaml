$schema: 'http://json-schema.org/draft-07/schema#'
$id: component.schema.yaml
title: Component YAML
type: object
description: Defines a reusable dashboard component that can be embedded in canvas dashboards
allOf:
  - title: Properties
    type: object
    properties:
      type:
        type: string
        const: component
        description: Refers to the resource type and must be `component`
      display_name:
        type: string
        description: Refers to the display name for the component
      description:
        type: string
        description: Detailed description of the component's purpose and functionality
      input:
        type: array
        description: List of input variables that can be passed to the component
        items:
          $ref: '#/definitions/component_variable_properties'
      output:
        description: Output variable that the component produces
        $ref: '#/definitions/component_variable_properties'
    required:
      - type
  - $ref: '#/definitions/common_properties'
definitions:
  component_variable_properties:
    type: object
    properties:
      name:
        type: string
        description: Unique identifier for the variable
      type:
        type: string
        description: Data type of the variable (e.g., string, number, boolean)
      value:
        description: Default value for the variable. Can be any valid JSON value type
        type:
          - string
          - number
          - boolean
          - object
          - array
    required:
      - name
      - type
    additionalProperties: false
  common_properties:
    type: object
    title: "Common Properties"
    properties:
      name:
        type: string
        description: Name is usually inferred from the filename, but can be specified manually.
      refs:
        type: array
        description: 'List of resource references'
        items:
          type: string
          description: A string reference like `<resource-name>` or `<type/resource-name>`.
      dev:
        type: object
        description: Overrides any properties in development environment.
      prod:
        type: object
        description: Overrides any properties in production environment. 